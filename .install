#!/usr/bin/env bash

echo "==> Updating submodules"
cd `dirname "$0"`
git submodule update --init

echo "==> Installing homebrew"
which brew || ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

packages=(ctags curl fzf hub rbenv reattach-to-user-namespace ruby-build tmux zsh)
for package in "${packages[@]}"; do
  echo "==> Installing homebrew $package"
  which $package || brew install $package
done

packages=(autoenv readline the_silver_searcher)
for package in "${packages[@]}"; do
  echo "==> Installing homebrew $package"
  brew list | grep $package > /dev/null || brew install $package
done

echo "==> Installing homebrew rcm"
which rcup || (brew tap thoughtbot/formulae && brew install rcm)

echo "==> Symlinking dotfiles with rcup -v"
rcup -v
